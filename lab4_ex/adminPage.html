<!DOCTYPE html>
<html>
<head>
    <title>Admin</title>
    <script> ShowPage(0); </script>
</head>
<body>
    <!--logo-->
    <img src="logoParkIT.png" alt="logo" style=" border: none; padding: 12px 16px; cursor: pointer;
    position: absolute; bottom: 0px; right: 30px;">

    <!--nav bar-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">ParkIT</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="search">
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="text" placeholder="Search" id="myInput" onkeyup="myFunction();">
                <button type="submit" class="btn btn-success">Search</button>
            </form>
        </div>
    </nav>
    <div id="admin">
        <!--myDynamicTable-->
        <div class="page" id="myDynamicTable" style="overflow: auto; height: 150px">
            <table id="driversTable"></table>
            <script> 
                async function addDriversTable(){
                    drivers = await getDrivers();
                    addTable();
                }
                addDriversTable();
            </script>
            <script>
                function myFunction() {
                    var input, filter, table, tr, td, i, txtValue;
                    input = document.getElementById("myInput");
                    filter = input.value.toUpperCase(); //no perform a case-sensitive search
                    table = document.getElementById("driversTable");
                    tr = table.getElementsByTagName("tr");
                    for (i = 0; i < tr.length; i++) {
                        td = tr[i].getElementsByTagName("td")[3]; //[1] filter by...
                        if (td) {
                            txtValue = td.textContent || td.innerText;
                            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                tr[i].style.display = "";
                            } else {
                                tr[i].style.display = "none";
                            }
                        }
                    }
                }
            </script>
        </div>

         <!--add new driver-->
         <div class="page" id="Create New Driver">
                <form>
                        <p>
                            <label for="employeeNumber">Employee Number:</label>
                            <input name="employeeNumber" id="employeeNumber" type="text">
                        </p>
        
                        <p>
                            <label for="firstName">First Name:</label>
                            <input name="firstName" id="firstName" type="text">
                        </p>
        
                        <p>
                            <label for="lastName">Last Name:</label>
                            <input name="lastName" id="lastName" type="text">
                        </p>
        
                        <p>
                            <label for="email">Email:</label>
                            <input name="email" id="email" type="email">
                        </p>
        
                        <p>
                            <label for="phoneNumber">Phone Number:</label>
                            <input name="phone" id="phoneNumber" type="tel">
                        </p>
        
                        <p>
                            <label for="carNumber">Car Number:</label>
                            <input name="carNumber" id="carNumber" type="number">
                        </p>
        
                        <p>
                            <label for="carType">Car type:</label>
                            <select name="carType" id="carType">
                                <option>Company Car</option>
                                <option>Private Car</option>
                            </select>
                        </p>
        
        
                        <p>
                            <label for="carSeries">Car Series:</label>
                            <select name="carSeries" id="carSeries">
                                <option>Honda</option>
                                <option>Hundai</option>
                                <option>Mazda</option>
                            </select>
                        </p>
        
                        <p>
                            <label for="carColor">Car Color:</label>
                            <select name="carColor" id="carColor">
                                <option>Grey</option>
                                <option>Blue</option>
                                <option>Red</option>
                            </select>
                        </p>
        
                        <p>
                            <label for="carCode">Car Code:</label>
                            <input name="carCode" id="carCode" type="text">
                        </p>
        
                        <button type="button" id="createDriverBtn" class="btn btn-primary" onclick="setDriverData()">Create</button>
                        <script type="text/javascript">
                            function setDriverData() {
                                var employeeNumber = document.getElementById('employeeNumber').value;
                                var firstName = document.getElementById('firstName').value;
                                var lastName = document.getElementById('lastName').value;
                                var email = document.getElementById('email').value;
                                var phoneNumber = document.getElementById('phoneNumber').value;
                                var carNumber = document.getElementById('carNumber').value;
                                var carType = document.getElementById('carType').value;
                                var carSeries = document.getElementById('carSeries').value;
                                var carColor = document.getElementById('carColor').value;
                                var carCode = document.getElementById('carCode').value;
                                var barcode = Math.floor(Math.random() * 90000000) + 10000000;
                                var driver = {
                                    firstName: firstName,
                                    lastName: lastName,
                                    email: email,
                                    exitTime: '',
                                    phoneNumber: phoneNumber,
                                    carNumber: carNumber,
                                    carType: carType,
                                    carSeries: carSeries,
                                    carColor: carColor,
                                    carCode: carCode,
                                    barcode: barcode,
                                    parkingNumber: ' '
                                };
                                createDriver(employeeNumber, driver);
                                ShowPage(1);
                            }
                        </script>
                        <button type="button" id="cancelCreateDriverBtn" class="btn btn-primary" onclick="cancel()">Cancel</button>
                        <script>
                            function cancel(){
                                ShowPage(0);
                            }
                        </script>
                    </form>
        </div>
    
        <!--Update driver-->
        <div class="page" id="Update Driver">
            <form>
                <p>
                    <label for="employeeNumber">Employee Number:</label>
                    <input name="employeeNumber" id="employeeNumber" type="text">
                </p>

                <p>
                    <label for="firstName">First Name:</label>
                    <input name="firstName" id="firstName" type="text">
                </p>

                <p>
                    <label for="lastName">Last Name:</label>
                    <input name="lastName" id="lastName" type="text">
                </p>

                <p>
                    <label for="email">Email:</label>
                    <input name="email" id="email" type="email">
                </p>

                <p>
                    <label for="phoneNumber">Phone Number:</label>
                    <input name="phone" id="phoneNumber" type="tel">
                </p>

                <p>
                    <label for="carNumber">Car Number:</label>
                    <input name="carNumber" id="carNumber" type="number">
                </p>

                <p>
                    <label for="carType">Car type:</label>
                    <select name="carType" id="carType">
                        <option>Company Car</option>
                        <option>Private Car</option>
                    </select>
                </p>


                <p>
                    <label for="carSeries">Car Series:</label>
                    <select name="carSeries" id="carSeries">
                        <option>Honda</option>
                        <option>Hundai</option>
                        <option>Mazda</option>
                    </select>
                </p>

                <p>
                    <label for="carColor">Car Color:</label>
                    <select name="carColor" id="carColor">
                        <option>Grey</option>
                        <option>Blue</option>
                        <option>Red</option>
                    </select>
                </p>

                <p>
                    <label for="carCode">Car Code:</label>
                    <input name="carCode" id="carCode" type="text">
                </p>

                <button type="button" id="createDriverBtn" class="btn btn-primary" onclick="setDriverData()">Create</button>
                <script type="text/javascript">
                    function setDriverData() {
                        // getDriver(employeeNumber)
                        var employeeNumber = document.getElementById('employeeNumber').value;
                        var firstName = document.getElementById('firstName').value;
                        var lastName = document.getElementById('lastName').value;
                        var email = document.getElementById('email').value;
                        var phoneNumber = document.getElementById('phoneNumber').value;
                        var carNumber = document.getElementById('carNumber').value;
                        var carType = document.getElementById('carType').value;
                        var carSeries = document.getElementById('carSeries').value;
                        var carColor = document.getElementById('carColor').value;
                        var carCode = document.getElementById('carCode').value;
                        var barcode = Math.floor(Math.random() * 90000000) + 10000000;
                        var driver = {
                            firstName: firstName,
                            lastName: lastName,
                            email: email,
                            phoneNumber: phoneNumber,
                            carType: carType,
                            carNumber: carNumber,
                            carSeries: carSeries,
                            carColor: carColor,
                            carCode: carCode,
                            barcode: barcode,
                            exitTime: ''
                        };
                        updateDriver(employeeNumber, driver);
                        ShowPage(1);
                    }
                </script>
                 <button type="button" id="cancelUpdateDriverBtn" class="btn btn-primary" onclick="cancel()">Cancel</button>
                 <script>
                     function cancel(){
                         ShowPage(0);
                     }
                 </script>
            </form>
        </div>
    </div>
</body>
</html>